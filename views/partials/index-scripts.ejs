<script>
    new Tablesort(document.getElementById('books-added')); // Initialize tablesort on the books-added table

    // Function to handle the edit button click event. It shows the input field and hides the pencil, showing the other buttons the user can choose from (update and cancel).
    function handler(id, field) {
        fieldLowerCase = field.toLowerCase()
        document.getElementById(fieldLowerCase + id).setAttribute("hidden", true);
        document.getElementById("edit" + field + id).setAttribute("hidden", true);
        document.getElementById("done" + field + id).removeAttribute("hidden");
        document.getElementById("cancel" + field + id).removeAttribute("hidden");
        document.getElementById("input" + field + id).removeAttribute("hidden");
    }

    // Function to handle the cancel button click event. It hides the input field and shows the pencil, as well as the previous data that hasn't been altered.
    function cancelEdit(id, field) {
        fieldLowerCase = field.toLowerCase()
        document.getElementById(fieldLowerCase + id).removeAttribute("hidden");
        document.getElementById("edit" + field + id).removeAttribute("hidden");
        document.getElementById("done" + field + id).setAttribute("hidden", true);
        document.getElementById("cancel" + field + id).setAttribute("hidden", true);
        document.getElementById("input" + field + id).setAttribute("hidden", true);
    }
</script>

<script>
    function checkWidth() {
        const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);
        const addBookForm = document.getElementById("add-book-form");
        const footer = document.getElementById("footer");

        if (vw < 768) {
            // Apply Bootstrap fixed bottom on small screens
            addBookForm.classList.add("sticky-bottom");
            footer?.setAttribute("hidden", true);
        } else {
            addBookForm.classList.remove("sticky-bottom");
            footer?.removeAttribute("hidden");
        }
    }

    const addBookForm = document.getElementById("add-book-form");

    // Remove sticky when modal is open
    document.getElementById("add-book").addEventListener("show.bs.modal", () => {
        addBookForm?.classList.remove("sticky-bottom");
    });

    // Restore sticky when modal is closed
    document.getElementById("add-book").addEventListener("hidden.bs.modal", () => {
        checkWidth(); // reapply sticky if needed based on screen width
    });

    document.getElementById("add-book").addEventListener("show.bs.modal", () => {
        document.body.classList.add("modal-open-mobile");
        addBookForm?.classList.remove("sticky-bottom");
    });

    document.getElementById("add-book").addEventListener("hidden.bs.modal", () => {
        document.body.classList.remove("modal-open-mobile");
        checkWidth(); // reapply sticky if needed
    });



    window.addEventListener("resize", checkWidth);
    window.addEventListener("load", checkWidth);
</script>